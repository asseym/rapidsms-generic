{% extends "layout.html" %}
{% block title %}
    Generic - {{ block.super }}
{% endblock %}

{% block stylesheets %}
<link type="text/css" rel="stylesheet" href="{{BASE_CSS}}" />
<link type="text/css" rel="stylesheet" href="{{ MEDIA_URL }}rapidsms/stylesheets/splits.css" />
<link type="text/css" rel="stylesheet" href="{{ MEDIA_URL }}rapidsms/stylesheets/modules.css" />
<link type="text/css" rel="stylesheet" href="{{ MEDIA_URL }}rapidsms/stylesheets/forms.css" />
<link type="text/css" rel="stylesheet" href="{{ MEDIA_URL }}rapidsms/stylesheets/icons.css" />
    <link type="text/css" rel="stylesheet" href="{{MEDIA_URL}}generic/stylesheets/generic.css"/>
{% endblock %}

{% block javascripts %}
    {{ block.super }}
    <script src="{{MEDIA_URL}}generic/javascripts/generic.js" type="text/javascript"></script>
{% endblock %}

{% block content %}
    <form method="POST">
        {% csrf_token %}
        {% block filters %}
            <div id="filters" class="module">
                <h2>Filters</h2>
                {% for form in filter_forms %}
                    <div class="filterform" id="div_filter_{{ forloop.counter0 }}">
                        <table>
                            {% for field in form.visible_fields %}
                                <tr>
                                    <td>
                                        {% if forloop.first %}
                                            {% for hidden in form.hidden_fields %}
                                                {{ hidden }}
                                            {% endfor %}
                                        {% endif %}
                                        {{ field.label_tag }}
                                    </td>
                                    <td>
                                        {{ field }}
                                    </td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
                {% endfor %}
                <div class="filterform" id="div_filter_update">
                    <a href="javascript:void(0)" onclick="filter(this)">Update</a>
                </div>
            </div>
        {% endblock %}
    </form>
    <form method="POST">
        {% csrf_token %}
        {% block actions %}
        <input type="hidden" id="input_action" name="action" value=""/>
        <div class="module">
            <h2>Actions</h2>
            {% for cname, form in action_forms %}
                <div class="actionform" id="div_action_{{ forloop.counter0 }}">
                    <table>
                        {% for field in form.visible_fields %}
                            <tr>
                                <td>
                                    {% if forloop.first %}
                                        {% for hidden in form.hidden_fields %}
                                            {{ hidden }}
                                        {% endfor %}
                                    {% endif %}                                    
                                    {{ field.label_tag }}
                                </td>
                                <td>
                                    {{ field }}
                                </td>
                            </tr>
                        {% endfor %}
                        <tr>
                            <td colspan="2">            
                                <a href="javascript:void(0)" onclick="action(this, '{{ cname }}')">{{ form.action_label }}</a>
                            </td>
                        </tr>
                    </table>
                </div>
            {% endfor %}
        </div>
        {% endblock %}    
        <div id="object_list" class="module">
            {% block object_list %}
                {% include partial_base %}
            {% endblock %}
        </div>
    </form>
{% endblock %}